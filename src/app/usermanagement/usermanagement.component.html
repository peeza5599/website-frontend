<div *ngIf="isLoading" class="loading">Loading...</div>

<div *ngIf="!isLoading && users.length > 0" class="card-container">
  <div *ngFor="let user of users" class="card">
    <div class="card-image-container">
      <img *ngIf="user.image_url" [src]="user.image_url" alt="{{ user.name }}" class="card-image" />
    </div>
    <div class="card-content">
      <h2>{{ user.name }}</h2>
      <p><strong>Room:</strong> {{ user.Room_Number }}</p>
      <p><strong>Attendance:</strong> {{ user.total_attendance }}</p>
      <p><strong>Last Attendance:</strong> {{ user.last_attendance_time }}</p>
      <p><strong>Standing:</strong> {{ user.standing }}</p>
    </div>

    <button class="edit-button" (click)="editUser(user)">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
    <button class="delete-button" (click)="deleteUser(user.id)">üóëÔ∏è ‡∏•‡∏ö</button>
  </div>
</div>

<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
<div *ngIf="isEditing">
  <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
  <input [(ngModel)]="formData.name" placeholder="‡∏ä‡∏∑‡πà‡∏≠" />
  <input [(ngModel)]="formData.Room_Number" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á" />
  <input [(ngModel)]="formData.total_attendance" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" />
  <input [(ngModel)]="formData.last_attendance_time" placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î" />
  <input [(ngModel)]="formData.standing" placeholder="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞" />

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ -->
  <input type="file" (change)="onFileSelected($event)" />

  <button (click)="updateUser()">‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
  <button (click)="cancelEdit()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
</div>

<div *ngIf="!isLoading && users.length === 0">
  <p>No users found.</p>
</div>
